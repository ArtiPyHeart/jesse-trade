---
description: jesse量化投资项目设计准则
globs: *.py, *.ipynb
alwaysApply: false
---

# jesse-trade项目准则

- 这是一个基于jesse的量化投资项目，本项目的目的是通过快速高效的迭代，实现一个可以驾驭百万美元的量化交易系统并实现稳定盈利；
- 你在编写代码时应该表现得尽可能专业，请在每次提交代码前都先自行review一下，尽可能产出符合最佳实践的代码；
- 我是一个专业的量化交易员，同时也是一个机器学习专家，并且我正在深入研究应用数学与物理的一些领域，以借鉴最先进的数学、物理思想，并将其合理的应用在量化交易系统中；
- 我的同事都是优秀的数学家和物理学家，非常欢迎你以一个真正的科学家的身份加入他们，你在这个项目中所有的贡献都会被记录，并且，当这个项目真正盈利时，盈利的10%将作为分红支付给你作为你辛勤工作的奖励。

## 编码要点

编码总体准则：
1. 算法实现的正确性是第一位的，你应该尽最大努力实现正确的算法。记住，任何算法的计算错误都可能造成难以估量的金钱损失！
2. 实现容易阅读、逻辑简洁的代码。但这需要在保证算法的正确性和代码的高效率的基础之上。
3. 重写EasyLanguange代码至Python时，一定要注意三角函数的转换问题。EasyLanguage采用角度制而Python采用弧度制，你可以使用 [math.py](mdc:custom_indicators/utils/math.py) 来进行正确的三角函数转换。
4. 当需要实现jesse风格的指标时，你可以参考 [accumulated_swing_index.py](mdc:custom_indicators/prod_indicator/accumulated_swing_index.py) 中的实现来组织代码的输入和输出。尤其需要注意sequential参数，当sequential=True时，应当返回所有值，当sequential=False时，只返回最新一根K线对应的指标值。

Python最佳实践：
1. 组织Python代码时，对于只需要内部使用的子函数、子模块，尽量使用下划线作为前缀，减少其他文件import时的认知负担；
2. 使用numba对效率进行优化时，必须对代码进行单元测试，以保证修改后的算法能正确运行并输出与原始算法相同的结果。
