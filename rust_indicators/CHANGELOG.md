# Changelog

æœ¬æ–‡ä»¶è®°å½• pyrs-indicators é¡¹ç›®çš„é‡è¦å˜æ›´ã€‚

æ ¼å¼åŸºäº [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)ã€‚

---

## [0.5.0] - 2025-10-25

### âœ¨ æ–°å¢åŠŸèƒ½

**ğŸ¯ æ‹“æ‰‘æ•°æ®åˆ†ææ¨¡å— - Ripser æŒä¹…åŒè°ƒç®—æ³•**
- å®ç°å®Œæ•´çš„ Vietoris-Rips æŒä¹…åŒè°ƒè®¡ç®—ï¼ˆH_0, H_1, H_2ï¼‰
- æ”¯æŒç‚¹äº‘å’Œè·ç¦»çŸ©é˜µè¾“å…¥
- æ”¯æŒå¤šç§è·ç¦»åº¦é‡ï¼ˆeuclidean, manhattan, chebyshevï¼‰
- å®ç°é›¶é•¿åº¦ pair è¿‡æ»¤ï¼ˆ`collapse_edges` å‚æ•°ï¼‰
- è¾…åŠ©å‡½æ•°ï¼š`filter_persistence`, `get_betti_numbers`

**Python API**:
```python
from pyrs_indicators.topology import ripser
result = ripser(points, max_dim=1, threshold=2.0)
```

### ğŸ› Bug ä¿®å¤

**ä¿®å¤ä¸‰ä¸ª Critical Bugsï¼ˆåœ¨ Codex GPT-5 ååŠ©ä¸‹å‘ç°ï¼‰**:

1. **H_0 è¾¹éå†é¡ºåº** (`core/cohomology.rs:250`)
   - é—®é¢˜ï¼šé™åºéå†è¾¹å¯¼è‡´ death å€¼å®Œå…¨é”™è¯¯
   - ä¿®å¤ï¼šæ”¹ä¸ºå‡åº filtration é¡ºåº
   - å½±å“ï¼šH_0 å·®å¼‚ä» ~1.9 é™è‡³ < 1e-7

2. **PivotTracker å¤§å°** (`core/cohomology.rs:571-573`)
   - é—®é¢˜ï¼šä½¿ç”¨åˆ—æ•°è€Œéå…¨å±€ simplex ç´¢å¼•èŒƒå›´
   - ä¿®å¤ï¼šæ”¹ä¸º `max_pivot = diameters.len() - 1`
   - å½±å“ï¼šH_1 åœ¨ç¨€ç– filtration ä¸­äº§ç”Ÿè™šå‡ç‰¹å¾
   - å‘ç°æ–¹å¼ï¼šCodex æ·±åº¦ä»£ç åˆ†æ

3. **ç»´åº¦åˆ‡ç‰‡é€»è¾‘** (`core/algorithm.rs:383-393`) - **æœ€ä¸¥é‡**
   - é—®é¢˜ï¼šå‡è®¾æ’åºåç»´åº¦å•è°ƒï¼Œä½¿ç”¨é”™è¯¯çš„ offset åˆ‡ç‰‡
   - ä¿®å¤ï¼šæ”¹ç”¨ `filter(|s| s.vertices.len() - 1 == dim)`
   - å½±å“ï¼šH_1/H_2 å¯¹éšæœºç‚¹äº‘å®Œå…¨ä¸å¯ç”¨
   - å‘ç°æ–¹å¼ï¼šCodex å¤ç°æµ‹è¯•ï¼Œæ˜ç¡®æŒ‡å‡º"ç¡®å®šæ€§ bug"

### âœ… éªŒè¯ä¸æµ‹è¯•

**æ•°å€¼ä¸€è‡´æ€§**ï¼ˆä¸ giotto-ph ripser_parallel å¯¹æ¯”ï¼‰:
- H_0: max_diff < 1e-7ï¼ˆå®Œç¾åŒ¹é…ï¼‰
- H_1: Triangle/Circle/Two Circles/éšæœºç‚¹äº‘å…¨éƒ¨å®Œç¾åŒ¹é…

**é›†æˆæµ‹è¯•**: 10/10 å…¨éƒ¨é€šè¿‡
- Triangle, Disconnected, Threshold, Distance matrix
- Validation, Filter persistence, Betti numbers
- Different metrics, Numerical stability, Edge cases

**æ€§èƒ½åŸºå‡†**ï¼ˆMacBook Apple Silicon, threshold=2.0ï¼‰:
- 20 ç‚¹: < 1ms
- 50 ç‚¹: 9ms
- 100 ç‚¹: 118ms

### ğŸ“š æ–‡æ¡£

- åˆ›å»ºå®Œæ•´çš„ `pyrs_indicators/topology/README.md`
- åˆ›å»º `src/ripser/README.md` åŒ…å«ç®—æ³•è¯¦è§£ã€bug ä¿®å¤è®°å½•ã€æœªæ¥æ”¹è¿›æ–¹å‘
- Codex ååŠ©æ€»ç»“æ–‡æ¡£

### ğŸ™ è‡´è°¢

æ„Ÿè°¢ OpenAI Codex (GPT-5) çš„ä¸¤æ¬¡å…³é”®ååŠ©ï¼ˆæ¯æ¬¡ 600 ç§’è¶…æ—¶ï¼‰:
- ç²¾å‡†å®šä½ PivotTracker å’Œç»´åº¦åˆ‡ç‰‡ bug
- æ¾„æ¸…"å®ç°å·®å¼‚" vs "ç¡®å®šæ€§é”™è¯¯"
- é¿å…äº†é‡å¤§ç”Ÿäº§äº‹æ•…

---

## [0.4.0] - 2025-10-24

### âœ¨ æ–°å¢åŠŸèƒ½

**ğŸ¨ Python API æ¥å£å±‚**
- æ–°å¢ `pyrs_indicators` Python æ¥å£å±‚
  - åˆ†ç±»ç»„ç»‡ï¼š`ind_wavelets/`, `ind_decomposition/`, `ind_trend/`
  - å®Œæ•´ç±»å‹æç¤ºï¼š`numpy.typing` æ”¯æŒï¼ŒIDE è‡ªåŠ¨è¡¥å…¨
  - å‚æ•°éªŒè¯ï¼šFail Fast åŸåˆ™ï¼Œéæ³•å‚æ•°ç«‹å³æŠ› `ValueError`
  - è¯¦ç»†æ–‡æ¡£ï¼šæ¯ä¸ªå‡½æ•°éƒ½æœ‰å®Œæ•´ docstring
  - ç®€åŒ–è¿”å›å€¼ï¼šé»˜è®¤åªè¿”å›å¸¸ç”¨ç»“æœï¼Œå¯é€‰è¿”å›å®Œæ•´è¾“å‡º
- è¿ç§»æ‰€æœ‰ç”Ÿäº§ä»£ç åˆ°æ–°æ¥å£
  - `src/indicators/prod/emd/cls_vmd_indicator.py`
  - `src/indicators/prod/wavelets/cls_cwt_swt.py`
  - `src/indicators/prod/fti.py`
- æ›´æ–°æ–‡æ¡£å’Œæµ‹è¯•ä½¿ç”¨æ–°æ¥å£
- ç§»é™¤æ—§ `_rust_indicators` ç›´æ¥è°ƒç”¨æ–‡æ¡£

### âš ï¸ ç ´åæ€§å˜æ›´
- æ¨èä½¿ç”¨æ–°æ¥å£ï¼Œæ—§æ¥å£ `_rust_indicators` ä»ç„¶å¯ç”¨ä½†ä¸æ¨è

**ä½¿ç”¨ç¤ºä¾‹**:
```python
# æ–°æ¥å£ï¼ˆæ¨èï¼‰
from pyrs_indicators.ind_decomposition import vmd
from pyrs_indicators.ind_wavelets import cwt
from pyrs_indicators.ind_trend import fti

signal = np.sin(2 * np.pi * 5 * np.linspace(0, 1, 200))
modes = vmd(signal, alpha=2000.0, K=3)
```

---

## [0.3.1] - 2025-10-24

### ğŸ”§ ä¾èµ–å‡çº§

**PyO3 0.27 + numpy 0.27**
- å‡çº§ PyO3: 0.26.0 â†’ 0.27.1
- å‡çº§ numpy: 0.26.0 â†’ 0.27.0
- å‡çº§ rayon: 1.10 â†’ 1.11
- æ”¯æŒ Python 3.14.0 final
- æ‰€æœ‰æŒ‡æ ‡éªŒè¯é€šè¿‡ï¼ˆFTI/CWT/VMD å†’çƒŸæµ‹è¯•ï¼‰
- æ–°å¢å†’çƒŸæµ‹è¯•å¥—ä»¶ (`rust_indicators/tests/`)

### âœ… æµ‹è¯•ç»“æœ
```
âœ… FTI å†’çƒŸæµ‹è¯•é€šè¿‡
âœ… CWT å†’çƒŸæµ‹è¯•é€šè¿‡ (cmor1.5-1.0 wavelet)
âœ… VMD å†’çƒŸæµ‹è¯•é€šè¿‡ (èƒ½é‡å®ˆæ’éªŒè¯)
```

### ğŸ“Š å‡çº§å½±å“
- æ—  breaking changesï¼Œå¹³æ»‘å‡çº§
- ä»£ç æ— éœ€ä¿®æ”¹ï¼Œå¹²å‡€ç¼–è¯‘ï¼ˆé›¶è­¦å‘Šï¼‰
- æ€§èƒ½ä¿æŒä¸å˜

---

## [0.2.3] - 2025-10-22

### âš¡ VMD å†…å­˜å¸ƒå±€ä¼˜åŒ–

**Array3 ç»´åº¦é‡æ’**:
- **Array3 ç»´åº¦é‡æ’**: u_hat_plus ä» `(niter, t, k)` æ”¹ä¸º `(niter, k, t)`
- **å†…å­˜è®¿é—®ä¼˜åŒ–**: å°†é¢‘ç‡ç»´åº¦ `t` æ”¾åœ¨æœ€å†…å±‚ï¼Œæå‡ cache å±€éƒ¨æ€§
- **å…¨é¢ç´¢å¼•æ›´æ–°**: ä¿®æ”¹çº¦ 20 å¤„ç´¢å¼•è®¿é—®

**æ€§èƒ½æå‡**:
- Rolling window w256: **2.415s â†’ 2.104s** (12.9% æå‡)
- Rolling window w128: **0.295s â†’ 0.271s** (8.1% æå‡)
- k=4/k=3 å€ç‡æ”¹å–„: **3.73x â†’ 3.39x** (9.1% æ”¹å–„)

**æ•°å€¼ç²¾åº¦**:
- å®Œç¾ä¿æŒæ•°å€¼å¯¹é½ï¼ˆè¯¯å·® 0.00e+00 < 1e-13ï¼‰
- æ‰€æœ‰æ­£ç¡®æ€§æµ‹è¯•é€šè¿‡

**æŠ€æœ¯ç»†èŠ‚**:
- æ–°ç»´åº¦é¡ºåºä½¿å†…å±‚å¾ªç¯éå†è¿ç»­å†…å­˜
- æ”¹å–„ cache line åˆ©ç”¨ç‡ï¼Œå‡å°‘ cache miss
- å¯¹ k è¾ƒå¤§çš„åœºæ™¯æ•ˆæœæ›´æ˜æ˜¾

**ä¾èµ–å‡çº§**:
- criterion 0.5 â†’ 0.7ï¼ˆdev ä¾èµ–ï¼‰
- rand 0.8 â†’ 0.9ï¼ˆAPI æ›´æ–°ï¼‰
- é›¶ç¼–è¯‘è­¦å‘Šï¼Œæ‰€æœ‰æµ‹è¯•é€šè¿‡

**æµ‹è¯•å·¥å…·**:
- æ–°å¢ `profile_vmd.py` å’Œ `analyze_vmd_timing.py`
- é€šè¿‡ profiling ç§‘å­¦åˆ†æç“¶é¢ˆ

---

## [0.2.2] - 2025-10-22

### ğŸ”§ VMD ä»£ç è´¨é‡æ”¹è¿›

**FFT Plan æ¶æ„ä¼˜åŒ–**:
- å¼•å…¥ `FftPlanCache` ç±»å‹å’Œå¯é€‰ cache å‚æ•°
- `utils.rs` é‡æ„ï¼š`fft()` å’Œ `ifft()` æ”¯æŒ optional cache å‚æ•°
- `core.rs` ä¼˜åŒ–ï¼šVMD ä¸»å‡½æ•°é¢„è®¡ç®—æ‰€éœ€çš„ FFT plan sizes

**æŠ€æœ¯ç»†èŠ‚**:
- ä½¿ç”¨ `Arc<HashMap<...>>` å®ç°é›¶æˆæœ¬å…±äº«
- é¢„è®¡ç®— 2 ç§ FFT sizes: t (é•œåƒä¿¡å·) å’Œ t/2 (è¾“å‡ºé¢‘è°±)
- ä¿æŒå®Œç¾æ•°å€¼å¯¹é½ï¼ˆè¯¯å·® < 1e-13ï¼‰

**æ€§èƒ½å½±å“**:
- å•æ¬¡è°ƒç”¨å†… FFT/IFFT å¤ç”¨ cacheï¼Œå‡å°‘é‡å¤åˆ›å»ºå¼€é”€
- Rolling window åœºæ™¯æš‚æœªè§‚å¯Ÿåˆ°æ˜¾è‘—æå‡
- ä¸ºåç»­è·¨è°ƒç”¨ cache å¤ç”¨å¥ å®šæ¶æ„åŸºç¡€

**æµ‹è¯•**:
- æ–°å¢ `test_vmd_correctness.py` æ•°å€¼æ­£ç¡®æ€§æµ‹è¯•
- æ–°å¢ `bench_vmd_opt.py` å’Œ `bench_vmd_rolling.py` æ€§èƒ½åŸºå‡†

---

## [0.2.1] - 2025-10-22

### âš¡ CWT æ€§èƒ½ä¼˜åŒ– - Phase 1

**æ ¸å¿ƒä¼˜åŒ–**:
- **FFT Planner å¤ç”¨**: é¢„è®¡ç®—å¹¶ç¼“å­˜æ‰€æœ‰ FFT planï¼Œé¿å…é‡å¤åˆ›å»ºï¼ˆæ ¸å¿ƒä¼˜åŒ–ï¼Œæå‡ 150%+ï¼‰
- **Scale é‡‡æ ·ä¼˜åŒ–**: é¢„è®¡ç®—å€’æ•°é¿å…é‡å¤é™¤æ³•ï¼ˆå¾®å°æå‡ 2%ï¼‰
- **å‘é‡åŒ– diff è®¡ç®—**: ä½¿ç”¨ ndarray åˆ‡ç‰‡æ“ä½œæ›¿ä»£æ‰‹å·¥å¾ªç¯ï¼ˆå¾®å°æå‡ 0.5%ï¼‰

**æ€§èƒ½æå‡**:
- å¹³å‡åŠ é€Ÿ: **5.8x â†’ 10.2x** ï¼ˆæå‡ 75.9%ï¼‰
- æœ€å¤§åŠ é€Ÿ: **8x â†’ 17.4x** ï¼ˆæå‡ 117.5%ï¼‰
- Scale æ•°é‡è¶Šå¤šï¼Œä¼˜åŠ¿è¶Šæ˜æ˜¾ï¼ˆ100 scales å¯è¾¾ 17xï¼‰

**æ•°å€¼ç²¾åº¦**:
- å®Œç¾ä¿æŒä¸ PyWavelets å¯¹é½ï¼ˆè¯¯å·® < 2e-14ï¼‰
- æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼ˆæ­£ç¡®æ€§ + æ€§èƒ½ï¼‰

**æŠ€æœ¯ç»†èŠ‚**:
- ä½¿ç”¨ HashMap ç¼“å­˜ä¸åŒ FFT size çš„ plan
- Arc åŒ…è£…å®ç°å¹¶è¡Œç¯å¢ƒä¸‹çš„é›¶æˆæœ¬å…±äº«
- ä¿æŒé›¶ç¼–è¯‘è­¦å‘Š

---

## [0.2.0] - 2025-10-22

### âœ¨ CWT å®ç°

**æ–°å¢åŠŸèƒ½**:
- CWT (Continuous Wavelet Transform) å®Œæ•´å®ç°
- æ”¯æŒ Complex Morlet å°æ³¢ (cmor)
- å†…ç½®å¯¹ç§°å¡«å…… (symmetric padding)
- å¯é€‰ verbose æ¨¡å¼ç”¨äºå¼€å‘è°ƒè¯•

**æ€§èƒ½ä¼˜åŒ–**:
- å¹³å‡ 5.8x åŠ é€Ÿï¼ˆvs PyWaveletsï¼‰
- å¤§ä¿¡å·åœºæ™¯è¾¾åˆ° 7-8x åŠ é€Ÿ
- Rayon å¹¶è¡ŒåŒ–å¤„ç†å¤š scale è®¡ç®—

**æ•°å€¼ç²¾åº¦**:
- ä¸ PyWavelets å®Œç¾å¯¹é½ï¼ˆè¯¯å·® < 2e-14ï¼‰
- 3/3 é›†æˆæµ‹è¯•é€šè¿‡
- é›¶ç¼–è¯‘è­¦å‘Š

---

## [0.1.0] - 2025-10-21

### âœ¨ é¦–æ¬¡å‘å¸ƒ - ç”Ÿäº§å°±ç»ª

**æ ¸å¿ƒåŠŸèƒ½**:
- VMD (Variational Mode Decomposition) å®ç°
- NRBO (Newton-Raphson Boundary Optimization) å®ç°
- å®Œæ•´çš„æ•°å€¼å¯¹é½éªŒè¯ (è¯¯å·® ~1e-15)
- æ€§èƒ½åŸºå‡†æµ‹è¯• (50-100x åŠ é€Ÿ)

**æŠ€æœ¯æ”¹è¿›**:
- å‡çº§åˆ° PyO3 0.26 (ä½¿ç”¨ç°ä»£ Bound API)
- å‡çº§åˆ° numpy 0.26 (é›¶æ‹·è´ä¼˜åŒ–)
- é›¶ç¼–è¯‘è­¦å‘Šï¼Œ100% æµ‹è¯•é€šè¿‡

**é¡¹ç›®æ¸…ç†**:
- æ•´ç†æ–‡æ¡£ç»“æ„
- é…ç½® .gitignore æ’é™¤ä¸´æ—¶æ–‡ä»¶
- ä»£ç å®¡æŸ¥é€šè¿‡ï¼Œå¯å®‰å…¨é›†æˆ

---

## ç‰ˆæœ¬è¯´æ˜

**è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶**:
- **ä¸»ç‰ˆæœ¬å·**ï¼šä¸å…¼å®¹çš„ API å˜æ›´
- **æ¬¡ç‰ˆæœ¬å·**ï¼šå‘åå…¼å®¹çš„æ–°åŠŸèƒ½
- **ä¿®è®¢å·**ï¼šå‘åå…¼å®¹çš„ bug ä¿®å¤

**0.5.0 ä¸ºä½•æ˜¯æ¬¡ç‰ˆæœ¬æ›´æ–°**:
- æ–°å¢æ‹“æ‰‘æ•°æ®åˆ†ææ¨¡å—ï¼ˆæ–°åŠŸèƒ½ï¼‰
- å‘åå…¼å®¹ï¼šä¸å½±å“ç°æœ‰ VMD/CWT/FTI ç”¨æˆ·
- é‡å¤§é‡Œç¨‹ç¢‘ï¼šä½†æœªæ”¹å˜ç°æœ‰ API

**æœªæ¥è§„åˆ’**:
- v1.0.0ï¼šAPI ç¨³å®šï¼Œç”Ÿäº§æˆç†Ÿ
- v1.1ï¼šæ€§èƒ½ä¼˜åŒ–ï¼ˆç¼“å­˜ã€apparent pairsï¼‰
- v1.2ï¼šåŠŸèƒ½æ‰©å±•ï¼ˆä»£è¡¨åœˆã€å¯è§†åŒ–ï¼‰
- v2.0ï¼šåº”ç”¨åœºæ™¯ï¼ˆæ—¶é—´åºåˆ—ç‰¹å¾æå–å™¨ã€ML é›†æˆï¼‰
