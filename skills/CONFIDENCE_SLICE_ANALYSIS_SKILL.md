# Claude SKILL: ç½®ä¿¡åº¦åˆ‡ç‰‡åˆ†æä¸è¿‡æ»¤å™¨é…ç½®

## ä»»åŠ¡æ¦‚è¿°
åˆ†æMLæ¨¡å‹çš„ç½®ä¿¡åº¦åˆ‡ç‰‡å›¾è¡¨ï¼Œæ ¹æ®æ›²çº¿å½¢æ€é…ç½®è¿‡æ»¤å™¨ä»¥æ ¡å‡†æ¨¡å‹çš„å¤šç©ºäº¤æ˜“è¡Œä¸ºã€‚é€šè¿‡åŒé‡éªŒè¯æœºåˆ¶ç¡®ä¿åˆ¤å®šå‡†ç¡®æ€§ã€‚

## æ ¸å¿ƒé€»è¾‘
- æœºå™¨å­¦ä¹ æ‹Ÿåˆçš„æ˜¯**é¢æ¿æ•°æ®**ï¼Œè€Œé‡åŒ–æŠ•èµ„éœ€è¦è€ƒè™‘**æ—¶åºæ€§**
- å³ä¾¿æ¨¡å‹æ‹¥æœ‰è¾ƒå¥½çš„æ‹Ÿåˆæ•ˆæœï¼Œåœ¨æ—¶åºä¸Šä¾ç„¶å­˜åœ¨äºæŸçš„å¯èƒ½æ€§
- **ç”¨æˆ·å¿…é¡»æŒ‡å®šç›®æ ‡ç­–ç•¥**ï¼ˆå¦‚ `BinanceBtcDeapV1Voting`ï¼‰ï¼ŒæœªæŒ‡å®šåˆ™ç«‹å³åœæ­¢è¯¢é—®

### è§£å†³æ–¹æ¡ˆ
- é€šè¿‡ç½®ä¿¡åº¦åˆ‡ç‰‡åœ¨æµ‹è¯•é›†ä¸Šå¯¹æ¨¡å‹é¢„æµ‹æ¦‚ç‡è¿›è¡Œç»†ç²’åº¦åˆ‡åˆ†
- ç»“åˆå®é™…ç›ˆäºåˆ¶ä½œå½“å‰ç²’åº¦çš„çœŸå®ç›ˆäºæ›²çº¿
- é€šè¿‡æ ¡å‡†åçš„å¤šä¸ªæ¨¡å‹æŠ•ç¥¨å†³å®šäº¤æ˜“è¡Œä¸º
    - æ‰€æœ‰æ¨¡å‹ä¸€è‡´é¢„æœŸå¤šå¤´/ç©ºå¤´ â†’ å¼€å¯ç›¸åº”æŒä»“
    - æ¨¡å‹é¢„æµ‹æœ‰åˆ†æ­§ â†’ ç©ºä»“ï¼ˆåˆ©ç”¨åˆ†æ­§å‡å°‘äº¤æ˜“æ¬¡æ•°å¹¶é™ä½ç£¨æŸï¼‰

## æ¨¡å‹å‘½åçº¦å®šï¼ˆè‡ªåŠ¨è§£æï¼‰
è·¯å¾„æ ¼å¼ï¼š`temp/{ç±»å‹}_L{LAG}_N{PRED_NEXT}/`

| æ¨¡å‹ç±»å‹ | LOWER_BOUND | UPPER_BOUND | THRESHOLD |
|---------|-------------|-------------|-----------|
| c (åˆ†ç±») | 0.0 | 1.0 | 0.5 |
| r (å›å½’) | -1.0 | 1.0 | 0.0 |

**âš ï¸ å›å½’æ¨¡å‹è¾¹ç•Œ Round æœºåˆ¶**ï¼š
- ç»˜å›¾æ—¶å­˜åœ¨ round æœºåˆ¶ï¼šå°äº LOWER_BOUND çš„å€¼ä¼šè¢«å½’å…¥ LOWER_BOUND åˆ‡ç‰‡ï¼Œå¤§äº UPPER_BOUND çš„å€¼ä¼šè¢«å½’å…¥ UPPER_BOUND åˆ‡ç‰‡
- å› æ­¤å›å½’æ¨¡å‹æœ€è¾¹ç¼˜çš„ä¸¤ä¸ªåˆ‡ç‰‡ï¼ˆ-1.0 å’Œ 1.0 é™„è¿‘ï¼‰å®é™…ä¸ŠåŒ…å«äº†è¶…å‡ºè¾¹ç•Œçš„æ‰€æœ‰å€¼
- **é…ç½®è¿‡æ»¤å™¨æ—¶**ï¼šè‹¥è¦è®¾å®šæœ€è¾¹ç¼˜åˆ‡ç‰‡çš„è¿‡æ»¤å™¨ï¼Œåº”ä½¿ç”¨æ›´å¤§çš„èŒƒå›´å€¼ï¼ˆå¦‚ `-10` ä½œä¸ºä¸‹ç•Œï¼Œ`10` ä½œä¸ºä¸Šç•Œï¼‰ï¼Œä»¥ç¡®ä¿è¦†ç›–æ‰€æœ‰è¢« round åˆ°è¾¹ç•Œçš„å€¼
- åˆ†ç±»æ¨¡å‹æ— æ­¤é—®é¢˜ï¼Œå› ä¸ºé¢„æµ‹æ¦‚ç‡å€¼å§‹ç»ˆåœ¨ [0, 1] èŒƒå›´å†…

**ç¤ºä¾‹**ï¼š
- `temp/c_L3_N1` â†’ model_type="c", lag=3, pred_next=1, threshold=0.5
- `temp/r_L7_N3` â†’ model_type="r", lag=7, pred_next=3, threshold=0

## ç­–ç•¥éªŒè¯ï¼ˆå¼ºåˆ¶ï¼‰
åˆ†æå‰å¿…é¡»éªŒè¯ï¼š
1. ç­–ç•¥ç›®å½• `strategies/{STRATEGY_NAME}` å­˜åœ¨
2. é…ç½®æ–‡ä»¶ `strategies/{STRATEGY_NAME}/models/config.py` å­˜åœ¨
3. `LGBMContainer` ç±»å¯ä»é…ç½®æ–‡ä»¶å¯¼å…¥

**ä»»ä½•éªŒè¯å¤±è´¥ç«‹å³åœæ­¢**ï¼Œä¸å¾—çŒœæµ‹æˆ–åˆ›å»ºæ–‡ä»¶

## å†³ç­–å‡†åˆ™
**æ ¸å¿ƒåŸåˆ™**ï¼šä»æ•´ä½“è¶‹åŠ¿åˆ¤æ–­ï¼Œæ¨ªç›˜æ˜¯æ— å®³çš„ï¼Œåå¤æ— å¸¸çš„ç›ˆäºåˆ‡æ¢æ‰æ˜¯æœ‰å®³çš„ã€‚

**è¾…åŠ©åˆ¤æ–­æ–¹æ³•**ï¼šæƒ³è±¡ç”¨ä¸€æ¡çº¿æ€§å›å½’ç›´çº¿æ‹Ÿåˆç½®ä¿¡åº¦åˆ‡ç‰‡ä¸­çš„æ”¶ç›Šæ›²çº¿ï¼Œé€šè¿‡è¿™æ¡æƒ³è±¡ç›´çº¿çš„æ–œç‡è¾…åŠ©åˆ¤æ–­ï¼š
- æ–œç‡å¤§å¹… > 0 â†’ å€¾å‘ goodï¼ˆæ•´ä½“ä¸Šå‡è¶‹åŠ¿ï¼‰
- æ–œç‡å¤§å¹… < 0 â†’ å€¾å‘ reverseï¼ˆæ•´ä½“ä¸‹é™è¶‹åŠ¿ï¼‰
- æ–œç‡ â‰ˆ 0 â†’ å€¾å‘ giveupï¼ˆæ— æ˜ç¡®æ–¹å‘æ€§ï¼‰

æ­¤æ–¹æ³•å¯å‡å°‘å¯¹å±€éƒ¨æ³¢åŠ¨çš„è¿‡åº¦å…³æ³¨ï¼Œèšç„¦äºæ•´ä½“è¶‹åŠ¿ã€‚

æ¯å¼ å›¾ç‰‡åŒ…å«ä»¥ä¸‹å…³é”®ä¿¡æ¯ï¼š
- **åˆ‡ç‰‡åŒºé—´**ï¼š`[lower, upper]`ï¼Œå¦‚ [0.84, 0.86]
- **äº¤æ˜“æ–¹å‘**ï¼š(åšå¤š) æˆ– (åšç©º)
- **æ ·æœ¬å æ¯”**ï¼šè¯¥åŒºé—´æ ·æœ¬æ•°å æ€»æ ·æœ¬çš„æ¯”ä¾‹
- **æœ€ç»ˆæ”¶ç›Š**ï¼šæ›²çº¿ç»ˆç‚¹çš„ç´¯ç§¯ç›ˆäºå€¼
- **å¹³å‡æ”¶ç›Š**ï¼šçº¢è‰²è™šçº¿è¡¨ç¤ºçš„å‡å€¼
- **æ›²çº¿å½¢æ€**ï¼šæ•´ä½“èµ°åŠ¿ç‰¹å¾

æ¯å¼ å›¾ç‰‡åˆ†æååšå‡ºä»¥ä¸‹ä¸‰ç§å†³ç­–ä¹‹ä¸€ï¼š

### A. ä¸å¹²é¢„ï¼ˆgoodï¼‰
**åˆ¤å®šæ¡ä»¶**ï¼ˆæ»¡è¶³ä»¥ä¸‹ä»»ä¸€å³å¯ï¼‰ï¼š
1. **æ•´ä½“ä¸Šå‡è¶‹åŠ¿**ï¼šæœ€ç»ˆæ”¶ç›Š>0 ä¸” å¹³å‡æ”¶ç›Š>0ï¼Œå…è®¸ä»¥ä¸‹æƒ…å†µï¼š
   - ä¸­é€”æ¨ªç›˜éœ‡è¡ï¼ˆéœ‡è¡è°ƒæ•´å¹…åº¦å°äºå‰æœŸä¸Šå‡å¹…åº¦çš„50%ï¼‰
   - å°å¹…å›è°ƒï¼ˆäºæŸå¹…åº¦ä¸è¶…è¿‡ç´¯è®¡æ”¶ç›Šçš„50%ï¼‰
   - é˜¶æ®µæ€§ç›˜æ•´åç»§ç»­ä¸Šå‡
2. **ç¨³å®šç›ˆåˆ©**ï¼šæ›²çº¿é•¿æœŸç¨³å®šåœ¨ç›ˆåˆ©åŒºåŸŸï¼Œæ€»ä½“ä¸Šç¬¦åˆä¸Šå‡è¶‹åŠ¿

**å…³é”®ç‰¹å¾**ï¼š
- èµ·ç‚¹åˆ°ç»ˆç‚¹æ•´ä½“å‘ä¸Š
- å¤§éƒ¨åˆ†æ—¶é—´ä¿æŒåœ¨å¹³å‡æ”¶ç›Šçº¿ä»¥ä¸Š

**æ“ä½œ**ï¼šæ— éœ€è¿‡æ»¤å™¨

### B. åå‘æ“ä½œï¼ˆreverseï¼‰
**åˆ¤å®šæ¡ä»¶**ï¼ˆæ»¡è¶³ä»¥ä¸‹ä»»ä¸€å³å¯ï¼‰ï¼š
1. **æ•´ä½“ä¸‹é™è¶‹åŠ¿**ï¼šæœ€ç»ˆæ”¶ç›Š<0 ä¸” å¹³å‡æ”¶ç›Š<0ï¼Œå…è®¸ä»¥ä¸‹æƒ…å†µï¼š
   - ä¸­é€”æ¨ªç›˜éœ‡è¡ï¼ˆéœ‡è¡è°ƒæ•´å¹…åº¦å°äºå‰æœŸä¸‹é™å¹…åº¦çš„50%ï¼‰
   - å°å¹…åå¼¹åç»§ç»­ä¸‹è·Œï¼ˆåå¼¹ç›ˆåˆ©å¹…åº¦ä¸è¶…è¿‡ç´¯è®¡äºæŸçš„50%ï¼‰
   - é˜¶æ®µæ€§ä¼ç¨³åç»§ç»­ä¸‹é™
2. **ç¨³å®šäºæŸ**ï¼šæ›²çº¿é•¿æœŸç¨³å®šåœ¨äºæŸåŒºåŸŸï¼Œæ€»ä½“ä¸Šç¬¦åˆä¸‹é™è¶‹åŠ¿

**å…³é”®ç‰¹å¾**ï¼š
- èµ·ç‚¹åˆ°ç»ˆç‚¹æ•´ä½“å‘ä¸‹
- å¤§éƒ¨åˆ†æ—¶é—´ä¿æŒåœ¨å¹³å‡æ”¶ç›Šçº¿ä»¥ä¸‹ï¼ˆè´Ÿå€¼åŒºåŸŸï¼‰

**æ“ä½œ**ï¼š`mc.add_reverse_filter(lower_bound, upper_bound)`

### C. æ”¾å¼ƒäº¤æ˜“ï¼ˆgiveupï¼‰
**åˆ¤å®šæ¡ä»¶**ï¼ˆå¿…é¡»æ»¡è¶³ä»¥ä¸‹ä¹‹ä¸€ï¼‰ï¼š
1. **ä¸¥æ ¼é›¶æ ·æœ¬**ï¼šæ ·æœ¬æ•°é‡=0ï¼Œå®Œå…¨æ— äº¤æ˜“æ•°æ®ï¼ˆ**è¿™æ˜¯å”¯ä¸€ä¸æ ·æœ¬é‡ç›¸å…³çš„giveupæ¡ä»¶**ï¼‰
2. **å‰§çƒˆç›ˆäºåˆ‡æ¢**ï¼šæ›²çº¿åå¤ç©¿è¶Šé›¶çº¿ï¼ˆæˆ–å¹³å‡æ”¶ç›Šçº¿ï¼‰ï¼Œå‘ˆç°ä»¥ä¸‹æ¨¡å¼ï¼š
   - **Så‹/Wå‹/Må‹æ³¢åŠ¨**ï¼šå…ˆç›ˆåˆ©â†’äºæŸâ†’ç›ˆåˆ©ï¼Œæˆ–å…ˆäºæŸâ†’ç›ˆåˆ©â†’äºæŸï¼Œå‘ˆç°å‡ºæ—¶è€Œç›ˆåˆ©æ—¶è€ŒäºæŸçš„æ›²çº¿ï¼Œä¸”ç›ˆäºå¹…åº¦ç›¸å·®ä¸å¤§
   - **åŠåœ†å‹/Uå‹/Vå‹æ³¢åŠ¨**ï¼šå…ˆç›ˆåˆ©åäºæŸï¼Œæˆ–å…ˆäºæŸåç›ˆåˆ©ï¼Œå‘ˆç°å‡ºç±»ä¼¼åŠåœ†çš„å¼§å½¢æˆ–æ˜¯è¾ƒå®Œæ•´çš„Uå‹ã€Vå‹ï¼Œç»ˆç‚¹æœ‰å‘é›¶è½´å›å½’çš„è¶‹åŠ¿
3. **æ— æ–¹å‘æ€§**ï¼šæ›²çº¿ç›ˆåˆ©è¾ƒå°æˆ–è¶‹è¿‘é›¶ï¼Œæ•´ä½“æ— æ˜æ˜¾æ–¹å‘æ€§ï¼Œæ›²çº¿æ¥å›ä¸Šä¸‹æ‰­åŠ¨

**å…³é”®ç‰¹å¾**ï¼ˆgiveupçš„æ ¸å¿ƒæ ‡å¿—ï¼‰ï¼š
- **ä¸æ˜¯æ¨ªç›˜**ï¼Œè€Œæ˜¯ç›ˆåˆ©å’ŒäºæŸçŠ¶æ€çš„åå¤åˆ‡æ¢
- æ”¶ç›Šæ›²çº¿æœ‰æ—¶å› ç›ˆåˆ©è€Œä¸Šå‡ï¼Œæœ‰æ—¶å› äºæŸè€Œä¸‹é™ï¼Œä¸”ç›ˆäºå¹…åº¦å¤§è‡´ç›¸å½“
- éš¾ä»¥ä»æ”¶ç›Šæ›²çº¿çœ‹å‡ºæœªæ¥èƒ½æŒç»­ç›ˆåˆ©æˆ–äºæŸçš„èµ°åŠ¿

**ä¸åº”åˆ¤å®šä¸ºgiveupçš„æƒ…å†µ**ï¼š
- âŒ åœ¨ç›ˆåˆ©åŒºé•¿æœŸæ¨ªç›˜ï¼ˆåº”åˆ¤å®šä¸ºgoodï¼‰
- âŒ åœ¨äºæŸåŒºé•¿æœŸæ¨ªç›˜ï¼ˆåº”åˆ¤å®šä¸ºreverseï¼‰
- âŒ æœ‰å°å¹…å›è°ƒä½†æ•´ä½“å‘ä¸Šï¼ˆåº”åˆ¤å®šä¸ºgoodï¼‰
- âŒ æœ‰å°å¹…åå¼¹ä½†æ•´ä½“å‘ä¸‹ï¼ˆåº”åˆ¤å®šä¸ºreverseï¼‰

**æ“ä½œ**ï¼š`mc.add_giveup_filter(lower_bound, upper_bound)`

---

**åˆ¤å®šä¼˜å…ˆçº§**ï¼š
1. å…ˆçœ‹æ ·æœ¬é‡ï¼ˆ**ä¸¥æ ¼=0**ç«‹å³giveupï¼Œæ ·æœ¬å°‘ä½†>0ä¸å½±å“åˆ¤å®šï¼‰
2. å†çœ‹æ•´ä½“è¶‹åŠ¿ï¼ˆèµ·ç‚¹â†’ç»ˆç‚¹ï¼Œæœ€ç»ˆæ”¶ç›ŠÂ±å¹³å‡æ”¶ç›Šçš„ç¬¦å·ä¸€è‡´æ€§ï¼‰
3. æ£€æŸ¥æ›²çº¿æ˜¯å¦å­˜åœ¨å‰§çƒˆç›ˆäºåè½¬å½¢æ€
4. æ¨ªç›˜ä¸å½±å“good/reverseåˆ¤å®šï¼Œåªå½±å“æ˜¯å¦éœ€è¦giveup

**ğŸ”´ æ ·æœ¬é‡åˆ¤æ–­åŸåˆ™ï¼ˆé‡è¦ï¼‰ï¼š**
- **æ ·æœ¬å°‘â‰ giveup**ï¼šæ ·æœ¬æ•°é‡å°‘ä¸æ˜¯giveupçš„ç†ç”±ï¼Œå“ªæ€•åªæœ‰ä¸€ç¬”äº¤æ˜“ä¹Ÿæœ‰åˆ¤å®šä»·å€¼
- **æ ·æœ¬å°‘çš„åˆ‡ç‰‡åº”éµå¾ªä¸æ ·æœ¬å¤šçš„åˆ‡ç‰‡å®Œå…¨ç›¸åŒçš„åˆ¤å®šå‡†åˆ™**
- å³ä½¿ä»…æœ‰ä¸€ä¸¤ç¬”äº¤æ˜“ï¼Œåªè¦æ›²çº¿å‘ˆ**æ˜ç¡®è¶‹åŠ¿**ï¼ˆä¸Šå‡æˆ–ä¸‹é™ï¼‰ï¼Œå°±åº”åˆ¤å®šä¸ºgoodæˆ–reverse
- **åªæœ‰æ ·æœ¬æ•°é‡ä¸¥æ ¼ä¸ºé›¶**ï¼ˆå®Œå…¨æ²¡æœ‰äº¤æ˜“æ•°æ®ï¼‰æ—¶æ‰å› æ ·æœ¬é‡åŸå› giveup
- å•è°ƒè¶‹åŠ¿ä¸‹æ•æ‰åˆ°çš„æš´æ¶¨æš´è·Œæ˜¯æœ‰ä»·å€¼çš„ä¿¡å·ï¼Œåº”å½“ä¿ç•™

---

## å·¥ä½œæµç¨‹

### é˜¶æ®µ1ï¼šå‡†å¤‡
1. æå–ç”¨æˆ·æŒ‡å®šçš„ç­–ç•¥åç§°ï¼ˆæœªæŒ‡å®šåˆ™åœæ­¢ï¼‰
2. æ‰§è¡Œç­–ç•¥éªŒè¯ï¼ˆå¤±è´¥åˆ™åœæ­¢ï¼‰
3. è§£ææ¨¡å‹å‚æ•°ï¼ˆä»è·¯å¾„æå–ï¼‰
4. æ‰«æç›®æ ‡ç›®å½•è·å–æ‰€æœ‰åˆ‡ç‰‡å›¾ç‰‡ï¼ˆGlobï¼‰
5. æ£€æŸ¥è¿›åº¦æ–‡ä»¶ï¼š`temp/{æ¨¡å‹åç§°æ–‡ä»¶å¤¹ï¼Œå¦‚c_L4_N2}/{æ¨¡å‹åç§°}_round1.jsonl`ã€`_round2.jsonl`ã€`_final.jsonl`

### é˜¶æ®µ2ï¼šåŒè½®å¹¶è¡Œåˆ†æ

**âš ï¸ å…³é”®ï¼šåˆ†æ‰¹æ¬¡å¯åŠ¨ + åˆ†ç»„ç‹¬ç«‹å†™å…¥ç­–ç•¥**

ä¸ºé¿å…ä¸€æ¬¡æ€§å¯åŠ¨è¿‡å¤š agent å¯¼è‡´èµ„æºé™åˆ¶ï¼Œä»¥åŠå¤šä¸ª agent å¹¶å‘å†™å…¥åŒä¸€æ–‡ä»¶å¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œé‡‡ç”¨ã€Œåˆ†æ‰¹æ¬¡å¯åŠ¨ + åˆ†ç»„ç‹¬ç«‹å†™å…¥ + ä¸»è¿›ç¨‹åˆå¹¶ã€ç­–ç•¥ï¼š

**åˆ†æ‰¹æ¬¡è§„åˆ™**ï¼š
- æ¯ä¸ª agent åˆ†æ **10å¼ å›¾ç‰‡**
- æ¯æ‰¹æ¬¡æœ€å¤šå¯åŠ¨ **5ä¸ª agent**ï¼ˆå³æ¯æ‰¹æ¬¡å¤„ç†50å¼ å›¾ç‰‡ï¼‰
- å›¾ç‰‡æ€»æ•° â‰¤50å¼ ï¼šä¸€æ¬¡æ€§å¯åŠ¨æ‰€æœ‰ agent
- å›¾ç‰‡æ€»æ•° >50å¼ ï¼šåˆ†å¤šæ‰¹æ¬¡ï¼Œç­‰å¾…å½“å‰æ‰¹æ¬¡å®Œæˆåå†å¯åŠ¨ä¸‹ä¸€æ‰¹æ¬¡

**æ‰¹æ¬¡è®¡ç®—ç¤ºä¾‹**ï¼š
| å›¾ç‰‡æ€»æ•° | åˆ†ç»„æ•°(N) | æ‰¹æ¬¡æ•° | æ¯æ‰¹æ¬¡agentæ•° |
|---------|----------|--------|--------------|
| 100å¼ (åˆ†ç±») | 10ç»„ | 2æ‰¹ | 5+5 |
| 200å¼ (å›å½’) | 20ç»„ | 4æ‰¹ | 5+5+5+5 |

**ç¬¬ä¸€è½®æ‰§è¡Œæµç¨‹**ï¼š
1. å›¾ç‰‡åˆ†ç»„ï¼ˆ10å¼ /ç»„ï¼Œå…±Nç»„ï¼‰
2. è®¡ç®—æ‰¹æ¬¡æ•°ï¼š`ceil(N / 5)`
3. **åˆ†æ‰¹æ¬¡å¯åŠ¨ agents**ï¼š
   ```
   æ‰¹æ¬¡1: å¯åŠ¨ agent g01-g05ï¼Œç­‰å¾…å®Œæˆ
   æ‰¹æ¬¡2: å¯åŠ¨ agent g06-g10ï¼Œç­‰å¾…å®Œæˆ
   æ‰¹æ¬¡3: å¯åŠ¨ agent g11-g15ï¼Œç­‰å¾…å®Œæˆ
   ...
   ```
4. **æ¯ä¸ª agent å†™å…¥ç‹¬ç«‹çš„åˆ†ç»„æ–‡ä»¶**ï¼š
   - Group 1 â†’ `{æ¨¡å‹åç§°}_round1_g01.jsonl`
   - Group 2 â†’ `{æ¨¡å‹åç§°}_round1_g02.jsonl`
   - ...
   - Group N â†’ `{æ¨¡å‹åç§°}_round1_gNN.jsonl`
5. **æ‰€æœ‰æ‰¹æ¬¡å®Œæˆåï¼Œä¸»è¿›ç¨‹åˆå¹¶**ï¼š
   ```bash
   cat temp/{æ¨¡å‹åç§°}/*_round1_g*.jsonl > temp/{æ¨¡å‹åç§°}/{æ¨¡å‹åç§°}_round1.jsonl
   rm temp/{æ¨¡å‹åç§°}/*_round1_g*.jsonl
   ```
6. éªŒè¯ JSONL å®Œæ•´æ€§ï¼ˆè¡Œæ•°=å›¾ç‰‡æ•°ï¼Œæ ¼å¼æ­£ç¡®ï¼‰
7. è‹¥ç¼ºå¤±åˆ‡ç‰‡ï¼Œå¯åŠ¨è¡¥å…… agent åˆ†æç¼ºå¤±éƒ¨åˆ†

**ç¬¬äºŒè½®**ï¼š
- é‡‡ç”¨ç›¸åŒçš„ã€Œåˆ†æ‰¹æ¬¡å¯åŠ¨ + åˆ†ç»„ç‹¬ç«‹å†™å…¥ã€ç­–ç•¥
- å†™å…¥ `{æ¨¡å‹åç§°}_round2_gNN.jsonl`
- åˆå¹¶ä¸º `_round2.jsonl`
- éªŒè¯ JSONL å®Œæ•´æ€§

**Agent å†™å…¥æŒ‡ä»¤æ¨¡æ¿**ï¼š
```bash
# Agent åº”ä½¿ç”¨ç‹¬ç«‹æ–‡ä»¶åï¼ŒåŒ…å«ç»„å·
echo '{"slice": "[0.00, 0.01]", ...}' >> temp/{æ¨¡å‹åç§°}/{æ¨¡å‹åç§°}_round1_g01.jsonl
```

**ä¸»è¿›ç¨‹åˆå¹¶ä¸éªŒè¯è„šæœ¬**ï¼š
```python
# åˆå¹¶åˆ†ç»„æ–‡ä»¶
import json
from pathlib import Path

model_name = "c_L6_N2"  # æ›¿æ¢ä¸ºå®é™…æ¨¡å‹å
round_num = 1  # 1 æˆ– 2
model_dir = Path(f"temp/{model_name}")

# 1. åˆå¹¶æ‰€æœ‰åˆ†ç»„æ–‡ä»¶
group_files = sorted(model_dir.glob(f"{model_name}_round{round_num}_g*.jsonl"))
all_records = []
for gf in group_files:
    with open(gf, 'r') as f:
        for line in f:
            if line.strip():
                all_records.append(json.loads(line.strip()))

# 2. å†™å…¥åˆå¹¶æ–‡ä»¶
output_file = model_dir / f"{model_name}_round{round_num}.jsonl"
with open(output_file, 'w') as f:
    for record in all_records:
        f.write(json.dumps(record, ensure_ascii=False) + '\n')

# 3. åˆ é™¤åˆ†ç»„æ–‡ä»¶
for gf in group_files:
    gf.unlink()

# 4. éªŒè¯å®Œæ•´æ€§
existing_slices = {r['slice'] for r in all_records}
print(f"å·²åˆå¹¶ {len(existing_slices)} ä¸ªåˆ‡ç‰‡")

# 5. æ£€æŸ¥ç¼ºå¤±ï¼ˆåˆ†ç±»æ¨¡å‹100ä¸ªï¼Œå›å½’æ¨¡å‹200ä¸ªï¼‰
expected_count = 100 if model_name.startswith('c') else 200
if len(existing_slices) < expected_count:
    print(f"âš ï¸ ç¼ºå¤± {expected_count - len(existing_slices)} ä¸ªåˆ‡ç‰‡ï¼Œéœ€è¡¥å……åˆ†æ")
else:
    print("âœ“ å®Œæ•´æ€§éªŒè¯é€šè¿‡")
```

### é˜¶æ®µ3ï¼šè£åˆ¤
1. å¯¹æ¯”ä¸¤è½®å†³ç­–
2. ä¸€è‡´ â†’ ç›´æ¥å†™å…¥ `_final.jsonl`
3. ä¸ä¸€è‡´ â†’ å¯åŠ¨è£åˆ¤ agentï¼š
   - æä¾›å›¾ç‰‡ã€ä¸¤è½®å†³ç­–å’Œç†ç”±
   - ç»¼åˆåˆ¤å®šï¼ˆå½¢æ€ä¼˜å…ˆï¼Œæ•°å€¼è¾…åŠ©ï¼‰
   - æ— æ³•ç¡®å®š â†’ é‡‡ç”¨ giveupï¼ˆä¿å®ˆåŸåˆ™ï¼‰
4. è£åˆ¤ç»“æœå†™å…¥ `_final.jsonl`

### é˜¶æ®µ4ï¼šç”Ÿæˆé…ç½®
1. è¯»å– `_final.jsonl` åˆ†ç±»æ±‡æ€»
2. ç”Ÿæˆå¯æ‰§è¡Œä»£ç  `apply_filters_{æ¨¡å‹åç§°}.py`ï¼š
```python
from strategies.{STRATEGY_NAME}.models.config import LGBMContainer

mc = LGBMContainer(
    model_type="c",  # ä»è·¯å¾„è§£æ
    lag=3,
    pred_next=1,
    threshold=0.5,
)

# ä» final.jsonl è‡ªåŠ¨ç”Ÿæˆ
mc.add_reverse_filter(0.02, 0.04)
mc.add_giveup_filter(0.48, 0.50)
# ...

mc.save_filters()
```
3. è¿è¡Œä»£ç ï¼Œä¿å­˜é…ç½®åˆ°ç­–ç•¥ models ç›®å½•
4. ç«‹å³åˆ é™¤ä¸´æ—¶ Python æ–‡ä»¶

## JSONL æ ¼å¼
**round1/round2**ï¼š
```jsonl
{"slice": "[0.02, 0.04]", "decision": "reverse", "reason": "æ›²çº¿æŒç»­ä¸‹é™ï¼Œæœ€ç»ˆæ”¶ç›Š-0.0856", "sample_ratio": 0.0148}
```

**final**ï¼š
```jsonl
{"slice": "[0.02, 0.04]", "decision": "good", "reason": "è£åˆ¤åˆ¤å®šï¼šç»¼åˆè¯„ä¼°ä¸ºgood", "source": "referee", "sample_ratio": 0.0148}
```

**å­—æ®µ**ï¼šslice (åŒºé—´), decision (good/reverse/giveup), reason (ç†ç”±), sample_ratio (å æ¯”), source (consensus/referee)

## æ ¸å¿ƒè¦æ±‚
1. **å¼ºåˆ¶éªŒè¯**ï¼šç­–ç•¥ç›®å½•ã€config.pyã€LGBMContainerï¼Œå¤±è´¥ç«‹å³åœæ­¢
2. **åŒé‡éªŒè¯**ï¼šä¸¤è½®ç‹¬ç«‹åˆ†æï¼Œä¸ä¸€è‡´ç”±è£åˆ¤åˆ¤å®š
3. **ğŸ”´ åˆ†æ‰¹æ¬¡å¹¶è¡Œå¤„ç†**ï¼š
   - ä½¿ç”¨ Task tool + child agentsï¼ˆ10å¼ /ç»„ï¼‰
   - **æ¯æ‰¹æ¬¡æœ€å¤šå¯åŠ¨5ä¸ª agent**ï¼Œé¿å…èµ„æºé™åˆ¶
   - ç­‰å¾…å½“å‰æ‰¹æ¬¡å®Œæˆåå†å¯åŠ¨ä¸‹ä¸€æ‰¹æ¬¡
4. **ğŸ”´ åˆ†ç»„ç‹¬ç«‹å†™å…¥**ï¼š
   - **ç¦æ­¢**å¤šä¸ª agent åŒæ—¶å†™å…¥åŒä¸€æ–‡ä»¶
   - æ¯ä¸ª agent å¿…é¡»å†™å…¥ç‹¬ç«‹çš„åˆ†ç»„æ–‡ä»¶ï¼ˆå¦‚ `_round1_g01.jsonl`ï¼‰
   - ä¸»è¿›ç¨‹è´Ÿè´£åˆå¹¶æ‰€æœ‰åˆ†ç»„æ–‡ä»¶
   - è¿™æ˜¯é¿å…å¹¶å‘å†™å…¥å†²çªçš„**å¼ºåˆ¶è¦æ±‚**
5. **å®Œæ•´æ€§æ£€æŸ¥**ï¼šæ¯è½®åˆå¹¶åéªŒè¯ JSONLï¼ˆè¡Œæ•°ã€æ ¼å¼ï¼‰ï¼Œç¼ºå¤±åˆ™è¡¥å……åˆ†æ
6. **giveupåŸåˆ™**ï¼š
   - è£åˆ¤æ— æ³•ç¡®å®š â†’ giveup
   - **ä¸¥æ ¼é›¶æ ·æœ¬** â†’ giveup
   - âŒ æ ·æœ¬å°‘ä½†>0 â†’ ä¸åº”ä»…å› æ ·æœ¬å°‘è€Œgiveupï¼Œåº”éµå¾ªç›¸åŒåˆ¤å®šå‡†åˆ™
7. **æ•´ä½“è¶‹åŠ¿ä¼˜å…ˆ**ï¼š
   - çœ‹èµ·ç‚¹åˆ°ç»ˆç‚¹çš„æ•´ä½“æ–¹å‘ï¼Œè€Œéå±€éƒ¨æ³¢åŠ¨
   - æ¨ªç›˜æ˜¯æ— å®³çš„ï¼ˆåœ¨ç›ˆåˆ©åŒºæ¨ªç›˜â†’goodï¼Œåœ¨äºæŸåŒºæ¨ªç›˜â†’reverseï¼‰
   - åªæœ‰åå¤ç›ˆäºã€æ¥å›å¤§å¹…æ³¢åŠ¨çš„æ›²çº¿æ‰éœ€è¦giveup
8. **å½¢æ€åˆ¤å®šæ ‡å‡†**ï¼š
   - Good/Reverseï¼šå…è®¸æ¨ªç›˜ã€å…è®¸å°å¹…å›è°ƒ/åå¼¹ï¼Œåªè¦æ•´ä½“è¶‹åŠ¿æ˜ç¡®
   - Giveupï¼šä»…é’ˆå¯¹ç›ˆåˆ©-äºæŸçŠ¶æ€åå¤åˆ‡æ¢çš„ä¸ç¨³å®šæ›²çº¿
9. **åŠ¨æ€ä»£ç **ï¼šå¿…é¡»ä½¿ç”¨ç”¨æˆ·æŒ‡å®šçš„ç­–ç•¥åç§°
